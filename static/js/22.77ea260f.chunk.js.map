{"version":3,"sources":["views/Test/index.jsx"],"names":["times","TestIndex","props","startWheel","setState","btnDisable","timer","clearTimeout","i","prizeIndex","push","Math","floor","activeWheel","run","length","state","setTimeout","shift","info","width","content","okText","this","className","classnames","active","type","onClick","disabled","Component"],"mappings":"oPAMMA,G,QAAQ,IAERC,E,kDACJ,WAAYC,GAAQ,IAAD,8BACjB,cAAMA,IA4BRC,WAAa,WACX,EAAKC,SAAS,CAAEC,YAAY,IACxB,EAAKC,OAAOC,aAAa,EAAKD,OAElC,IADA,IACSE,EAAI,EAAGA,GAAKC,GAAiBD,GAAK,EACzCR,EAAMU,KAAKC,KAAKC,MAAuB,GAAjB,WAAM,GAAMJ,KAEpC,EAAKJ,SACH,CACES,aAAc,GAEhB,EAAKC,MAxCU,EA4CnBA,IAAM,WACJ,GAAId,EAAMe,OAAS,EAAG,CACpB,IAAQF,EAAgB,EAAKG,MAArBH,YACR,EAAKT,SAAS,CACZS,aAAcA,EAAc,GAAK,IAEnC,EAAKP,MAAQW,WAAW,EAAKH,IAAKd,EAAMkB,cACd,IAAjBlB,EAAMe,SACf,EAAKX,SAAS,CAAEC,YAAY,IAC5B,IAAMc,KAAK,CACTC,MAAO,IACPC,QAAS,6CACTC,OAAQ,mBAtDZ,EAAKN,MAAQ,CACXH,aAAc,EACdR,YAAY,GAEd,EAAKC,MAAQ,KANI,E,wDAwBnB,WACEC,aAAagB,KAAKjB,S,oBAoCpB,WACE,MAAoCiB,KAAKP,MAAjCH,EAAR,EAAQA,YAAaR,EAArB,EAAqBA,WACrB,OACE,yBAAKmB,UAAU,cACb,wBAAIA,UAAU,cACZ,wBAAIA,UAAWC,IAAW,aAAc,CAAEC,OAAwB,IAAhBb,KAAlD,KACA,wBAAIW,UAAWC,IAAW,aAAc,CAAEC,OAAwB,IAAhBb,KAAlD,KACA,wBAAIW,UAAWC,IAAW,aAAc,CAAEC,OAAwB,IAAhBb,KAAlD,KACA,wBAAIW,UAAWC,IAAW,aAAc,CAAEC,OAAwB,IAAhBb,KAAlD,KACA,wBAAIW,UAAU,yBAAd,wBAEE,uBAAQG,KAAK,UAAUC,QAASL,KAAKpB,WAAY0B,SAAUxB,GAA3D,6BAIF,wBAAImB,UAAWC,IAAW,aAAc,CAAEC,OAAwB,IAAhBb,KAAlD,KACA,wBAAIW,UAAWC,IAAW,aAAc,CAAEC,OAAwB,IAAhBb,KAAlD,KACA,wBAAIW,UAAWC,IAAW,aAAc,CAAEC,OAAwB,IAAhBb,KAAlD,KACA,wBAAIW,UAAWC,IAAW,aAAc,CAAEC,OAAwB,IAAhBb,KAAlD,W,GAhFciB,aAuFT7B","file":"static/js/22.77ea260f.chunk.js","sourcesContent":["import React, { Component } from 'react';\r\nimport { Button, Modal } from 'antd';\r\nimport classnames from 'classnames';\r\n\r\nimport './index.scss';\r\n\r\nconst times = [];\r\n\r\nclass TestIndex extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      activeWheel: -1,\r\n      btnDisable: false,\r\n    };\r\n    this.timer = null;\r\n  }\r\n\r\n  /* \r\n      const times = [0, 5000, 10000]\r\n      const run = () => {\r\n      if (times.length > 0) {\r\n        console.log('++++++')\r\n        console.log(times)\r\n        setTimeout(run, times.shift()) \r\n        // shift() 方法用于把数组的第一个元素从其中删除，并返回第一个元素的值。\r\n      } else {\r\n        console.log('-----')\r\n      }\r\n    }\r\n    run()\r\n    */\r\n\r\n  componentWillUnmount() {\r\n    clearTimeout(this.timer);\r\n  }\r\n\r\n  // 开始转盘\r\n  startWheel = () => {\r\n    this.setState({ btnDisable: true });\r\n    if (this.timer) clearTimeout(this.timer);\r\n    const prizeIndex = 6; // 模拟中奖序号\r\n    for (let i = 0; i <= prizeIndex + 24; i += 1) {\r\n      times.push(Math.floor(2 ** (0.1 * i) * 80));\r\n    }\r\n    this.setState(\r\n      {\r\n        activeWheel: -1,\r\n      },\r\n      this.run\r\n    );\r\n  };\r\n\r\n  run = () => {\r\n    if (times.length > 0) {\r\n      const { activeWheel } = this.state;\r\n      this.setState({\r\n        activeWheel: (activeWheel + 1) % 8,\r\n      });\r\n      this.timer = setTimeout(this.run, times.shift()); // times.shift()返回的是一个数字\r\n    } else if (times.length === 0) {\r\n      this.setState({ btnDisable: false });\r\n      Modal.info({\r\n        width: 500,\r\n        content: '恭喜你抽中奖品',\r\n        okText: '确定',\r\n      });\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { activeWheel, btnDisable } = this.state;\r\n    return (\r\n      <div className=\"text-index\">\r\n        <ul className=\"prize-wrap\">\r\n          <li className={classnames('prize-item', { active: activeWheel === 0 })}>0</li>\r\n          <li className={classnames('prize-item', { active: activeWheel === 1 })}>1</li>\r\n          <li className={classnames('prize-item', { active: activeWheel === 2 })}>2</li>\r\n          <li className={classnames('prize-item', { active: activeWheel === 7 })}>7</li>\r\n          <li className=\"prize-item prize-desc\">\r\n            10积分/次\r\n            <Button type=\"primary\" onClick={this.startWheel} disabled={btnDisable}>\r\n              立即抽奖\r\n            </Button>\r\n          </li>\r\n          <li className={classnames('prize-item', { active: activeWheel === 3 })}>3</li>\r\n          <li className={classnames('prize-item', { active: activeWheel === 6 })}>6</li>\r\n          <li className={classnames('prize-item', { active: activeWheel === 5 })}>5</li>\r\n          <li className={classnames('prize-item', { active: activeWheel === 4 })}>4</li>\r\n        </ul>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default TestIndex;\r\n"],"sourceRoot":""}