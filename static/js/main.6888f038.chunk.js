(this["webpackJsonpant-study"]=this["webpackJsonpant-study"]||[]).push([[6],{10:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r})),n.d(t,"d",(function(){return o})),n.d(t,"c",(function(){return i}));var a={set:function(e,t){window.localStorage.setItem(e,JSON.stringify(t))},get:function(e){return JSON.parse(window.localStorage.getItem(e))},remove:function(e){window.localStorage.removeItem(e)}},r={set:function(e,t){window.sessionStorage.setItem(e,JSON.stringify(t))},get:function(e){return JSON.parse(window.sessionStorage.getItem(e))},remove:function(e){window.sessionStorage.removeItem(e)}},o=function(e,t){var n,a=e,r=!0;return function(){var e=arguments,o=this;return r?(a.apply(o,e),r=!1):!n&&void(n=setTimeout((function(){clearTimeout(n),n=null,a.apply(o,e)}),t||500))}},i=function(e,t){var n;return function(){var a=this,r=arguments;n&&clearTimeout(n),n=setTimeout((function(){e.apply(a,r)}),t||500)}}},122:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return m})),n.d(t,"a",(function(){return d}));var a=n(8),r=n(145),o=n(14),i=n(73),c=n(10),l=["authToken"],u=function(){return{type:o.a.LOGIN_FAILED}},s=function(e){return function(t){t({type:o.a.LOGIN_START}),function(e){return i.a.post("/api/v1/login",e)}(e).then((function(n){var a=n.authToken,i=Object(r.a)(n,l);!0===e.remember?(c.a.set("authToken",a),c.a.set("userInfo",i),c.b.remove("authToken"),c.b.remove("userInfo")):(c.b.set("authToken",a),c.b.set("userInfo",i),c.a.remove("authToken"),c.a.remove("userInfo")),t(function(e){return{type:o.a.LOGIN_SUCCESS,payload:{userInfo:e}}}(n))})).catch((function(e){throw t(u()),e}))}},m=function(){return function(e){c.a.remove("authToken"),c.a.remove("userInfo"),c.b.remove("authToken"),c.b.remove("userInfo"),e(u())}},d=function(e){return function(t){var n=c.a.get("userInfo")||c.b.get("userInfo"),r=Object(a.a)(Object(a.a)({},n),{},{avatar:e});c.a.get("userInfo")?c.a.set("userInfo",r):c.b.get("userInfo")&&c.b.set("userInfo",r),t({type:o.a.CHANGE_AVATAR,payload:{imgUrl:e}})}}},14:function(e,t,n){"use strict";t.a={NOTICE_READ:"NOTICE_READ",START_NOTICE_POST:"START_NOTICE_POST",END_NOTICE_POST:"END_NOTICE_POST",FETCH_NOTICE_LIST:"FETCH_NOTICE_LIST",LOGIN_START:"LOGIN_START",LOGIN_SUCCESS:"LOGIN_SUCCESS",LOGIN_FAILED:"LOGIN_FAILED",CHANGE_AVATAR:"CHANGE_AVATAR"}},151:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return l}));var a=n(14),r=n(73),o=function(){return{type:a.a.START_NOTICE_POST}},i=function(){return{type:a.a.END_NOTICE_POST}},c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(n){n(o()),setTimeout((function(){n({type:a.a.NOTICE_READ,payload:{id:e,readType:t}}),n(i())}),1200)}},l=function(){return function(e){e(o()),r.a.post("/api/v1/noticeList").then((function(t){e({type:a.a.FETCH_NOTICE_LIST,payload:{list:t.list}})})),e(i())}}},155:function(e,t,n){e.exports=n.p+"static/media/logo.75f291c0.png"},170:function(e,t,n){e.exports=n(262)},246:function(e,t,n){},260:function(e,t,n){},261:function(e,t,n){},262:function(e,t,n){"use strict";n.r(t);n(171);var a=n(19),r=n(0),o=n.n(r),i=n(2),c=n(157),l=n(76),u=n(11),s=n(53),m=n(66),d=n(67),p=n(68),f=n(69),h=n(18),g=n.n(h);function b(){return o.a.createElement("div",null,o.a.createElement("h1",null,"Loading"))}n(164);var E,O,N=n(109),v=(n(161),n(12)),T=(n(165),n(149)),y=(n(166),n(105)),I=(n(185),n(32)),S=(n(188),n(46)),C=n(151),_=n(122),j=n(155),L=n.n(j),k=(n(246),S.a.Header),A=S.a.Content,R=S.a.Sider,w=I.a.SubMenu,P=Object(s.b)((function(e){return{noticeCount:e.noticeReducer.list.filter((function(e){return!1===e.hasRead})).length,avatar:e.userReducer.avatar,displayName:e.userReducer.displayName}}),{fetchNoticeList:C.a,loginOut:_.c})(E=Object(u.h)(E=function(e){Object(p.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(m.a)(this,n),(a=t.call(this,e)).turnToPage=function(e){var t=e.key;if("/login"===t)return a.props.loginOut();a.props.history.push(t)},a.renderMenu=function(e){return o.a.createElement(I.a,{onClick:a.turnToPage},o.a.createElement(I.a.Item,{key:"/admin/notice"},o.a.createElement(y.a,{dot:Boolean(e)},"\u901a\u77e5\u6d88\u606f")),o.a.createElement(I.a.Item,{key:"/admin/profile"},"\u4e2a\u4eba\u8bbe\u7f6e"),o.a.createElement(I.a.Item,{key:"/login"},"\u9000\u51fa\u767b\u5f55"))},a.state={},a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.props.fetchNoticeList()}},{key:"render",value:function(){var e=this,t=this.props,n=t.avatar,a=t.displayName,r=this.props.location.pathname.split("/"),i=r.slice(0,3),c=r.slice(0,4)||[],l={};if(c.length>3){var u=c.join("/");K.some((function(e){return e.children&&e.isNav&&u.includes(e.pathname)}))&&(l={openKeys:u},i=r.slice(0,4))}return o.a.createElement(S.a,{style:{minHeight:"100%"}},o.a.createElement(k,{className:"header dj-header",style:{backgroundColor:"#fff"}},o.a.createElement("div",{className:"dj-logo"},o.a.createElement("img",{src:L.a,alt:"loading..."})),o.a.createElement(N.a,{overlay:this.renderMenu(this.props.noticeCount)},o.a.createElement("div",{style:{display:"flex",alignItems:"center"}},o.a.createElement(y.a,{count:this.props.noticeCount},o.a.createElement(T.a,{src:n}),o.a.createElement("span",null,"\u6b22\u8fce\u4f60\uff01",a),o.a.createElement(v.a,{type:"down"}))))),o.a.createElement(S.a,{className:"main-contaniner"},o.a.createElement(R,{width:200,className:"main-sidder"},o.a.createElement(I.a,Object.assign({mode:"inline",selectedKeys:[i.join("/")],style:{height:"100%",borderRight:0}},l),this.props.menus.map((function(t){return t.children?o.a.createElement(w,{key:t.pathname,title:o.a.createElement("span",null,o.a.createElement(v.a,{type:t.iconName})," ",t.title)},t.children.map((function(t){return o.a.createElement(I.a.Item,{key:t.pathname,onClick:function(t){var n=t.key;return e.props.history.push(n)}},t.title)}))):o.a.createElement(I.a.Item,{key:t.pathname,onClick:function(t){var n=t.key;return e.props.history.push(n)}},o.a.createElement(v.a,{type:t.iconName})," ",t.title)})))),o.a.createElement(S.a,{style:{padding:"16px"},className:"main-content"},o.a.createElement(A,{style:{margin:0}},this.props.children))))}}]),n}(r.Component))||E)||E,G=g()({loader:function(){return Promise.all([n.e(0),n.e(1),n.e(3),n.e(5),n.e(14)]).then(n.bind(null,1104))},loading:b}),x=g()({loader:function(){return Promise.all([n.e(0),n.e(4),n.e(16)]).then(n.bind(null,1118))},loading:b}),D=g()({loader:function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(3),n.e(10)]).then(n.bind(null,1116))},loading:b}),H=g()({loader:function(){return Promise.all([n.e(0),n.e(1),n.e(3),n.e(5),n.e(13)]).then(n.bind(null,1115))},loading:b}),F=g()({loader:function(){return n.e(26).then(n.bind(null,1105))},loading:b}),U=g()({loader:function(){return n.e(25).then(n.bind(null,1106))},loading:b}),J=g()({loader:function(){return Promise.all([n.e(0),n.e(2),n.e(18)]).then(n.bind(null,1117))},loading:b}),M=g()({loader:function(){return n.e(24).then(n.bind(null,1107))},loading:b}),B=g()({loader:function(){return Promise.all([n.e(0),n.e(9),n.e(23)]).then(n.bind(null,1108))},loading:b}),V=[{pathname:"/login",component:G},{pathname:"/404",component:U}],K=[{pathname:"/admin/dashboard",component:x,title:"\u4eea\u8868\u76d8",isNav:!0,iconName:"dashboard",roles:["001","002","003"]},{pathname:"/admin/article",component:D,exact:!0,title:"\u6587\u7ae0\u7ba1\u7406",isNav:!0,iconName:"unordered-list",roles:["001","002","003"]},{pathname:"/admin/article/edit/:id",component:H,exact:!0,title:"\u6587\u7ae0\u7f16\u8f91",roles:["001","002","003"]},{pathname:"/admin/notice",component:J,title:"\u6d88\u606f\u4e2d\u5fc3",roles:["001","002","003"]},{pathname:"/admin/settings",component:F,title:"\u8bbe\u7f6e",isNav:!0,iconName:"setting",roles:["001"]},{pathname:"/admin/test",title:"\u5b9e\u9a8c",isNav:!0,iconName:"setting",roles:["001","002","003"],children:[{pathname:"/admin/test/index",title:"\u5e78\u8fd0\u62bd\u5956",isNav:!0,iconName:"setting",roles:["001","002","003"],component:g()({loader:function(){return Promise.all([n.e(20),n.e(22)]).then(n.bind(null,1109))},loading:b})},{pathname:"/admin/test/cssindex",title:"css\u5b9e\u9a8c",isNav:!0,iconName:"setting",roles:["001","002","003"],component:g()({loader:function(){return n.e(19).then(n.bind(null,1110))},loading:b})},{pathname:"/admin/test/timeLine",title:"\u65f6\u95f4\u6233",isNav:!0,iconName:"setting",roles:["001","002","003"],component:g()({loader:function(){return n.e(21).then(n.bind(null,1111))},loading:b})},{pathname:"/admin/test/hoc",title:"\u9ad8\u9636\u7ec4\u4ef6",isNav:!0,iconName:"setting",roles:["001","002","003"],component:g()({loader:function(){return Promise.all([n.e(1),n.e(2),n.e(11),n.e(28)]).then(n.bind(null,1112))},loading:b})},{pathname:"/admin/test/parabola",title:"\u629b\u7269\u7ebf",isNav:!0,iconName:"setting",roles:["001","002","003"],component:g()({loader:function(){return Promise.all([n.e(0),n.e(17)]).then(n.bind(null,1119))},loading:b})},{pathname:"/admin/test/tree",title:"tree\u7ec4\u4ef6",isNav:!0,iconName:"setting",roles:["001","002","003"],component:g()({loader:function(){return Promise.all([n.e(12),n.e(27)]).then(n.bind(null,1113))},loading:b})},{pathname:"/admin/test/echart",title:"echart",isNav:!0,iconName:"setting",roles:["001","002","003"],component:g()({loader:function(){return Promise.all([n.e(4),n.e(15)]).then(n.bind(null,1114))},loading:b})}]},{pathname:"/admin/noauth",component:M,roles:["001","002","003"]},{pathname:"/admin/profile",component:B,roles:["001","002","003"]}],q=(n(260),K.filter((function(e){return e.isNav}))),z=Object(s.b)((function(e){return{isLogin:e.userReducer.isLogin,role:e.userReducer.role}}))(O=function(e){Object(p.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).renderRoute=function(t,n){return t.map((function(t){return t.children?e.renderRoute(t.children,n):o.a.createElement(u.c,{key:t.pathname,path:t.pathname,exact:t.exact,render:function(e){return t.roles.includes(n)?o.a.createElement(t.component,e):o.a.createElement(u.b,{to:"/admin/noauth"})}})}))},e}return Object(d.a)(n,[{key:"render",value:function(){var e=this.props,t=e.isLogin,n=e.role;return t?o.a.createElement(P,{menus:q},o.a.createElement(u.e,null,this.renderRoute(K,n),o.a.createElement(u.b,{to:"/admin/dashboard",from:"/admin",exact:!0}),o.a.createElement(u.b,{to:"/404"}))):o.a.createElement(u.b,{to:"/login"})}}]),n}(r.Component))||O,Q=n(65),W=n(156),X=n(8),Y=n(14),Z={isLoading:!1,list:[]},$=n(10),ee=Boolean($.a.get("authToken"))||Boolean($.b.get("authToken")),te=$.a.get("userInfo")||$.b.get("userInfo"),ne=Object(X.a)(Object(X.a)({},te),{},{isLogin:ee,isLoading:!1}),ae=Object(Q.b)({noticeReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Y.a.NOTICE_READ:var n=e.list.map((function(e){return("allRead"===t.payload.readType||e.id===t.payload.id)&&(e.hasRead=!0),e}));return Object(X.a)(Object(X.a)({},e),{},{list:n});case Y.a.START_NOTICE_POST:return Object(X.a)(Object(X.a)({},e),{},{isLoading:!0});case Y.a.END_NOTICE_POST:return Object(X.a)(Object(X.a)({},e),{},{isLoading:!1});case Y.a.FETCH_NOTICE_LIST:return Object(X.a)(Object(X.a)({},e),{},{list:t.payload.list});default:return e}},userReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Y.a.LOGIN_START:return Object(X.a)(Object(X.a)({},e),{},{isLoading:!0});case Y.a.LOGIN_SUCCESS:var n=t.payload.userInfo;return Object(X.a)(Object(X.a)(Object(X.a)({},e),n),{},{isLogin:!0,isLoading:!1});case Y.a.LOGIN_FAILED:return{id:"",displayName:"",avatar:"",role:"",isLogin:!1,isLoading:!1};case Y.a.CHANGE_AVATAR:return Object(X.a)(Object(X.a)({},e),{},{avatar:t.payload.imgUrl});default:return e}}}),re=Object(Q.c)(ae,Object(Q.a)(W.a));n(261);Object(i.render)(o.a.createElement(s.a,{store:re},o.a.createElement(a.b,{locale:c.a},o.a.createElement(l.a,null,o.a.createElement(u.e,null,o.a.createElement(u.c,{path:"/admin",render:function(e){return o.a.createElement(z,e)}}),V.map((function(e){return o.a.createElement(u.c,{key:e.pathname,exact:e.exact,path:e.pathname,component:e.component})})),o.a.createElement(u.b,{to:"/admin",from:"/",exact:!0}),o.a.createElement(u.b,{to:"/404"}))))),document.getElementById("root"))},73:function(e,t,n){"use strict";n(163);var a=n(112),r=n(8),o=n(62),i=n.n(o),c=["/api/v1/login"];i.a.defaults.timeout=5e3,i.a.defaults.withCredentials=!0,i.a.defaults.headers.common["Content-Type"]="application/json;charset=utf-8";var l=i.a.create({baseURL:""});l.interceptors.request.use((function(e){return c.includes(e.url)||(e.data=Object(r.a)(Object(r.a)({},e.data),{},{authToken:window.localStorage.getItem("authToken")||"textToken"})),e})),l.interceptors.response.use((function(e){if(200===e.data.code)return e.data.data;a.a.error(e.data.errMsg)})),t.a=l}},[[170,7,8]]]);
//# sourceMappingURL=main.6888f038.chunk.js.map