{"version":3,"sources":["utils/index.js","store/actions/userAction.js","api/login.js","store/actions/actionType.js","store/actions/noticeAction.js","api/notice.js","components/Frame/logo.png","components/Loading/index.js","components/Frame/index.js","views/index.js","routes/index.js","App.js","store/reducers/noticeReducer.js","store/reducers/userReducer.js","store/reducers/index.js","store/index.js","index.js","service/index.js"],"names":["$localStorage","set","key","value","window","localStorage","setItem","JSON","stringify","get","parse","getItem","remove","removeItem","$sessionStorage","sessionStorage","throttle","fn","interval","timer","_self","firstTime","args","arguments","__me","this","apply","setTimeout","clearTimeout","debounce","func","loginFailed","type","actionTypes","LOGIN_FAILED","loginFn","params","dispatch","LOGIN_START","ajax","post","loginApi","then","res","authToken","userInfo","remember","LOGIN_SUCCESS","payload","loginSuccess","catch","err","loginOut","changeAvatar","imgUrl","Obj","avatar","CHANGE_AVATAR","NOTICE_READ","START_NOTICE_POST","END_NOTICE_POST","FETCH_NOTICE_LIST","startNotice","endNotice","noticeRead","id","readType","fetchNoticeList","list","module","exports","Loading","Header","Content","Sider","SubMenu","Frame","connect","state","noticeCount","noticeReducer","filter","item","hasRead","length","userReducer","displayName","withRouter","props","turnToPage","history","push","renderMenu","onClick","Item","dot","Boolean","pathArr","location","pathname","split","activePathArr","slice","openPathArr","defaultProps","openKeys","join","adminRouter","some","children","isNav","includes","style","minHeight","className","backgroundColor","src","logoImg","alt","overlay","display","alignItems","count","width","mode","selectedKeys","height","borderRight","menus","map","route","title","iconName","subRoute","padding","margin","Component","Login","Loadable","loader","loading","Dashboard","ArticleList","ArticleEdit","Settings","NotFound","Notice","NoAuth","Profile","mainRouter","component","roles","exact","App","isLogin","role","renderRoute","menuList","path","render","routerProps","to","from","initState","isLoading","combineReducers","action","newList","createStore","rootReducer","applyMiddleware","thunk","store","locale","zhCN","rootProps","document","getElementById","whiteList","axios","defaults","timeout","withCredentials","headers","common","create","baseURL","interceptors","request","use","config","url","data","response","resp","code","error","errMsg"],"mappings":"6GAAA,wIAEA,IAAMA,EAAgB,CACpBC,IADoB,SAChBC,EAAKC,GAEPC,OAAOC,aAAaC,QAAQJ,EAAKK,KAAKC,UAAUL,KAGlDM,IANoB,SAMhBP,GAEF,OAAOK,KAAKG,MAAMN,OAAOC,aAAaM,QAAQT,KAGhDU,OAXoB,SAWbV,GAELE,OAAOC,aAAaQ,WAAWX,KAK7BY,EAAkB,CACtBb,IADsB,SAClBC,EAAKC,GAEPC,OAAOW,eAAeT,QAAQJ,EAAKK,KAAKC,UAAUL,KAGpDM,IANsB,SAMlBP,GAEF,OAAOK,KAAKG,MAAMN,OAAOW,eAAeJ,QAAQT,KAGlDU,OAXsB,SAWfV,GAELE,OAAOW,eAAeF,WAAWX,KAK/Bc,EAAW,SAACC,EAAIC,GACpB,IACIC,EADEC,EAAQH,EAEVI,GAAY,EAChB,OAAO,WACL,IAAMC,EAAOC,UACPC,EAAOC,KACb,OAAIJ,GACFD,EAAMM,MAAMF,EAAMF,GACVD,GAAY,IAElBF,QAGJA,EAAQQ,YAAW,WACjBC,aAAaT,GACbA,EAAQ,KACRC,EAAMM,MAAMF,EAAMF,KACjBJ,GAAY,QAKbW,EAAW,SAACC,EAAMZ,GACtB,IAAIC,EACJ,OAAO,WAAa,IAAD,OACbG,EAAOC,UACPJ,GAAOS,aAAaT,GACxBA,EAAQQ,YAAW,WACjBG,EAAKJ,MAAM,EAAMJ,KAChBJ,GAAY,Q,mMClDba,EAAc,WAClB,MAAO,CACLC,KAAMC,IAAYC,eAKTC,EAAU,SAAAC,GAAM,OAAI,SAAAC,GAC/BA,EArBO,CACLL,KAAMC,IAAYK,cCJE,SAACF,GACvB,OAAOG,IAAKC,KAAK,gBAAiBJ,GDwBlCK,CAASL,GAAQM,MAAK,SAAAC,GACpB,IACEC,EAEED,EAFFC,UACGC,EAFL,YAGIF,EAHJ,IAIwB,IAApBP,EAAOU,UACT9C,IAAcC,IAAI,YAAa2C,GAC/B5C,IAAcC,IAAI,WAAY4C,GAC9B/B,IAAgBF,OAAO,aACvBE,IAAgBF,OAAO,cAEvBE,IAAgBb,IAAI,YAAa2C,GACjC9B,IAAgBb,IAAI,WAAY4C,GAChC7C,IAAcY,OAAO,aACrBZ,IAAcY,OAAO,aAEvByB,EAlCiB,SAACQ,GACpB,MAAO,CACLb,KAAMC,IAAYc,cAClBC,QAAS,CACPH,aA8BOI,CAAaN,OACrBO,OAAO,SAAAC,GAER,MADAd,EAASN,KACHoB,OAKGC,EAAW,kBAAM,SAAAf,GAC5BrC,IAAcY,OAAO,aACrBZ,IAAcY,OAAO,YACrBE,IAAgBF,OAAO,aACvBE,IAAgBF,OAAO,YAGvByB,EAASN,OAIEsB,EAAe,SAACC,GAAD,OAAY,SAAAjB,GACtC,IAAIkB,EAAMvD,IAAcS,IAAI,aAAeK,IAAgBL,IAAI,YAC3DoC,EAAQ,2BACPU,GADO,IAEVC,OAAQF,IAENtD,IAAcS,IAAI,YACpBT,IAAcC,IAAI,WAAY4C,GACrB/B,IAAgBL,IAAI,aAC7BK,IAAgBb,IAAI,WAAY4C,GAElCR,EAAS,CACPL,KAAMC,IAAYwB,cAClBT,QAAS,CACPM,e,gCE5ES,KACbI,YAAa,cACbC,kBAAmB,oBACnBC,gBAAiB,kBACjBC,kBAAmB,oBAEnBvB,YAAa,cACbS,cAAe,gBACfb,aAAc,eAEduB,cAAe,kB,yHCPXK,EAAc,WAClB,MAAO,CACL9B,KAAMC,IAAY0B,oBAGhBI,EAAY,WAChB,MAAO,CACL/B,KAAMC,IAAY2B,kBAKTI,EAAa,SAACC,GAAD,IAAKC,EAAL,uDAAgB,KAAhB,OAAyB,SAAA7B,GACjDA,EAASyB,KAETnC,YAAW,WACTU,EAAS,CACPL,KAAMC,IAAYyB,YAClBV,QAAS,CACPiB,KACAC,cAGJ7B,EAAS0B,OACR,QAIQI,EAAkB,kBAAM,SAAA9B,GACnCA,EAASyB,KC7BFvB,IAAKC,KAAK,sBD8BIE,MAAK,SAAAC,GACxBN,EAAS,CACPL,KAAMC,IAAY4B,kBAClBb,QAAS,CACPoB,KAAMzB,EAAIyB,WAIhB/B,EAAS0B,Q,oBEzCXM,EAAOC,QAAU,IAA0B,kC,4QCE5B,SAASC,IACtB,OACE,6BACI,wC,mJCMAC,G,OAAR,IAAQA,QAAQC,EAAhB,IAAgBA,QAASC,EAAzB,IAAyBA,MACjBC,EAAR,IAAQA,QA0IOC,EAhIdC,aARuB,SAAAC,GACtB,MAAO,CACLC,YAAaD,EAAME,cAAcZ,KAAKa,QAAO,SAAAC,GAAI,OAAqB,IAAjBA,EAAKC,WAAmBC,OAC7E5B,OAAQsB,EAAMO,YAAY7B,OAC1B8B,YAAaR,EAAMO,YAAYC,eAIT,CAAEnB,oBAAiBf,c,GAC5CmC,Y,oDAEC,WAAYC,GAAQ,IAAD,8BACjB,cAAMA,IAMRC,WAAa,YAAc,IAAXvF,EAAU,EAAVA,IACd,GAAY,WAARA,EAAkB,OAAO,EAAKsF,MAAMpC,WACxC,EAAKoC,MAAME,QAAQC,KAAKzF,IATP,EA2BnB0F,WAAa,SAACb,GAAD,OACX,uBAAMc,QAAS,EAAKJ,YAClB,sBAAMK,KAAN,CAAW5F,IAAI,iBACb,uBAAO6F,IAAKC,QAAQjB,IAApB,6BAEF,sBAAMe,KAAN,CAAW5F,IAAI,kBAAf,4BAGA,sBAAM4F,KAAN,CAAW5F,IAAI,UAAf,8BAjCF,EAAK4E,MAAQ,GAFI,E,qDAyCnB,WACErD,KAAK+D,MAAMrB,oB,oBAGb,WAAU,IAAD,OACP,EAAgC1C,KAAK+D,MAA7BhC,EAAR,EAAQA,OAAQ8B,EAAhB,EAAgBA,YACVW,EAAUxE,KAAK+D,MAAMU,SAASC,SAASC,MAAM,KAC/CC,EAAgBJ,EAAQK,MAAM,EAAG,GACjCC,EAAcN,EAAQK,MAAM,EAAG,IAAM,GACrCE,EAAe,GACnB,GAAID,EAAYnB,OAAS,EAAG,CAC1B,IAAMqB,EAAWF,EAAYG,KAAK,KAErBC,EAAYC,MAAK,SAAA1B,GAAI,OAAIA,EAAK2B,UAAY3B,EAAK4B,OAASL,EAASM,SAAS7B,EAAKiB,eAE1FK,EAAe,CAAEC,YACjBJ,EAAgBJ,EAAQK,MAAM,EAAG,IAIrC,OACE,uBAAQU,MAAO,CAACC,UAAU,SACxB,kBAACzC,EAAD,CAAQ0C,UAAU,mBAAmBF,MAAO,CAACG,gBAAgB,SAC3D,yBAAKD,UAAU,WACb,yBAAKE,IAAKC,IAASC,IAAI,gBAEzB,uBAAUC,QAAS9F,KAAKmE,WAAWnE,KAAK+D,MAAMT,cAC5C,yBAAKiC,MAAO,CAACQ,QAAQ,OAAOC,WAAW,WACrC,uBAAOC,MAAOjG,KAAK+D,MAAMT,aACvB,uBAAQqC,IAAK5D,IACb,yDAAW8B,GACX,uBAAMtD,KAAK,aAKnB,uBAAQkF,UAAU,mBAChB,kBAACxC,EAAD,CAAOiD,MAAO,IAAKT,UAAU,eAC3B,qCACEU,KAAK,SACLC,aAAc,CAACxB,EAAcK,KAAK,MAClCM,MAAO,CAAEc,OAAQ,OAAQC,YAAa,IAClCvB,GAGJ/E,KAAK+D,MAAMwC,MAAMC,KAAI,SAAAC,GACnB,OAAKA,EAAMrB,SAQP,kBAAClC,EAAD,CAASzE,IAAKgI,EAAM/B,SAAUgC,MAC5B,8BAAM,uBAAMnG,KAAMkG,EAAME,WAAxB,IAAsCF,EAAMC,QAG5CD,EAAMrB,SAASoB,KAAI,SAAAI,GACjB,OAAQ,sBAAMvC,KAAN,CAAW5F,IAAKmI,EAASlC,SAAUN,QAAS,gBAAE3F,EAAF,EAAEA,IAAF,OAAW,EAAKsF,MAAME,QAAQC,KAAKzF,KAAOmI,EAASF,WAX3G,sBAAMrC,KAAN,CAAW5F,IAAKgI,EAAM/B,SAAUN,QAAS,gBAAE3F,EAAF,EAAEA,IAAF,OAAW,EAAKsF,MAAME,QAAQC,KAAKzF,KAC1E,uBAAM8B,KAAMkG,EAAME,WADpB,IACkCF,EAAMC,YAoBlD,uBAAQnB,MAAO,CAAEsB,QAAS,QAAUpB,UAAU,gBAC5C,kBAACzC,EAAD,CACEuC,MAAO,CACLuB,OAAQ,IAGT9G,KAAK+D,MAAMqB,iB,GArHN2B,e,MCpBdC,EAAQC,IAAS,CACrBC,OAAQ,kBAAM,4EACdC,QAASrE,IAELsE,EAAYH,IAAS,CACzBC,OAAQ,kBAAM,8DACdC,QAASrE,IAELuE,EAAcJ,IAAS,CAC3BC,OAAQ,kBAAM,4EACdC,QAASrE,IAELwE,EAAcL,IAAS,CAC3BC,OAAQ,kBAAM,4EACdC,QAASrE,IAELyE,EAAWN,IAAS,CACxBC,OAAQ,kBAAM,iCACdC,QAASrE,IAEL0E,EAAWP,IAAS,CACxBC,OAAQ,kBAAM,iCACdC,QAASrE,IAEL2E,EAASR,IAAS,CACtBC,OAAQ,kBAAM,8DACdC,QAASrE,IAEL4E,EAAST,IAAS,CACtBC,OAAQ,kBAAM,iCACdC,QAASrE,IAEL6E,EAAUV,IAAS,CACvBC,OAAQ,kBAAM,8DACdC,QAASrE,ICnBE8E,EAAa,CACxB,CAEElD,SAAU,SACVmD,UAAWb,GAEb,CACEtC,SAAU,OACVmD,UAAWL,IAIFtC,EAAc,CACzB,CACER,SAAU,mBACVmD,UAAWT,EACXV,MAAO,qBACPrB,OAAO,EACPsB,SAAU,YACVmB,MAAO,CAAC,MAAO,MAAO,QAExB,CACEpD,SAAU,iBACVmD,UAAWR,EACXU,OAAO,EACPrB,MAAO,2BACPrB,OAAO,EACPsB,SAAU,iBACVmB,MAAO,CAAC,MAAO,MAAO,QAExB,CACEpD,SAAU,0BACVmD,UAAWP,EACXS,OAAO,EACPrB,MAAO,2BACPoB,MAAO,CAAC,MAAO,MAAO,QAExB,CACEpD,SAAU,gBACVmD,UAAWJ,EACXf,MAAO,2BACPoB,MAAO,CAAC,MAAO,MAAO,QAExB,CACEpD,SAAU,kBACVmD,UAAWN,EACXb,MAAO,eACPrB,OAAO,EACPsB,SAAU,UACVmB,MAAO,CAAC,QAEV,CACEpD,SAAU,cACVgC,MAAO,eACPrB,OAAO,EACPsB,SAAU,UACVmB,MAAO,CAAC,MAAO,MAAO,OACtB1C,SAAU,CACR,CACEV,SAAU,oBACVgC,MAAO,2BACPrB,OAAO,EACPsB,SAAU,UACVmB,MAAO,CAAC,MAAO,MAAO,OACtBD,UD3CUZ,IAAS,CACzBC,OAAQ,kBAAM,wDACdC,QAASrE,KC2CL,CACE4B,SAAU,uBACVgC,MAAO,kBACPrB,OAAO,EACPsB,SAAU,UACVmB,MAAO,CAAC,MAAO,MAAO,OACtBD,UD9CSZ,IAAS,CACxBC,OAAQ,kBAAM,iCACdC,QAASrE,KC8CL,CACE4B,SAAU,uBACVgC,MAAO,qBACPrB,OAAO,EACPsB,SAAU,UACVmB,MAAO,CAAC,MAAO,MAAO,OACtBD,UDjDSZ,IAAS,CACxBC,OAAQ,kBAAM,iCACdC,QAASrE,KCiDL,CACE4B,SAAU,kBACVgC,MAAO,2BACPrB,OAAO,EACPsB,SAAU,UACVmB,MAAO,CAAC,MAAO,MAAO,OACtBD,UDpDaZ,IAAS,CAC5BC,OAAQ,kBAAM,sEACdC,QAASrE,KCoDL,CACE4B,SAAU,uBACVgC,MAAO,qBACPrB,OAAO,EACPsB,SAAU,UACVmB,MAAO,CAAC,MAAO,MAAO,OACtBD,UDvDSZ,IAAS,CACxBC,OAAQ,kBAAM,uDACdC,QAASrE,KCuDL,CACE4B,SAAU,mBACVgC,MAAO,mBACPrB,OAAO,EACPsB,SAAU,UACVmB,MAAO,CAAC,MAAO,MAAO,OACtBD,UD1DSZ,IAAS,CACxBC,OAAQ,kBAAM,wDACdC,QAASrE,KC0DL,CACE4B,SAAU,qBACVgC,MAAO,SACPrB,OAAO,EACPsB,SAAU,UACVmB,MAAO,CAAC,MAAO,MAAO,OACtBD,UD7DWZ,IAAS,CAC1BC,OAAQ,kBAAM,uDACdC,QAASrE,OC+DT,CACE4B,SAAU,gBACVmD,UAAWH,EACXI,MAAO,CAAC,MAAO,MAAO,QAExB,CACEpD,SAAU,iBACVmD,UAAWF,EACXG,MAAO,CAAC,MAAO,MAAO,SCvIpBvB,G,OAAQrB,EAAY1B,QAAO,SAACiD,GAAD,OAAWA,EAAMpB,UAqDnC2C,EA5Cd5E,aAPuB,SAACC,GACvB,MAAO,CACL4E,QAAS5E,EAAMO,YAAYqE,QAC3BC,KAAM7E,EAAMO,YAAYsE,Q,+MAM1BC,YAAc,SAACC,EAAUF,GACvB,OAAOE,EAAS5B,KAAI,SAACC,GACnB,OAAIA,EAAMrB,SACD,EAAK+C,YAAY1B,EAAMrB,SAAU8C,GAGtC,kBAAC,IAAD,CACEzJ,IAAKgI,EAAM/B,SACX2D,KAAM5B,EAAM/B,SACZqD,MAAOtB,EAAMsB,MACbO,OAAQ,SAACC,GAGP,OADsB9B,EAAMqB,MAAMxC,SAAS4C,GAEzC,kBAACzB,EAAMoB,UAAcU,GAErB,kBAAC,IAAD,CAAUC,GAAG,yB,4CAS3B,WAEE,MAA0BxI,KAAK+D,MAAvBkE,EAAR,EAAQA,QAASC,EAAjB,EAAiBA,KACjB,OAAOD,EACL,kBAAC,EAAD,CAAO1B,MAAOA,GACZ,kBAAC,IAAD,KACGvG,KAAKmI,YAAYjD,EAAagD,GAC/B,kBAAC,IAAD,CAAUM,GAAG,mBAAmBC,KAAK,SAASV,OAAK,IACnD,kBAAC,IAAD,CAAUS,GAAG,WAIjB,kBAAC,IAAD,CAAUA,GAAG,e,GAtCDzB,e,kCCjBZ2B,EAAY,CAChBC,WAAW,EACXhG,KAAM,I,QCAFsF,GACJ1D,QAAQhG,IAAcS,IAAI,eAAiBuF,QAAQlF,IAAgBL,IAAI,cAGnEoC,GACJ7C,IAAcS,IAAI,aAAeK,IAAgBL,IAAI,YAGjD0J,GAAS,2BACVtH,IADU,IAEb6G,WACAU,WAAW,ICTEC,eAAgB,CAC7BrF,cFAa,WAAgC,IAA/BF,EAA8B,uDAAtBqF,EAAWG,EAAW,uCAC5C,OAAOA,EAAOtI,MACZ,KAAKC,IAAYyB,YACf,IAAI6G,EAAUzF,EAAMV,KAAK6D,KAAI,SAAA/C,GAM3B,OAL8B,YAA1BoF,EAAOtH,QAAQkB,UAERgB,EAAKjB,KAAKqG,EAAOtH,QAAQiB,MADlCiB,EAAKC,SAAU,GAIVD,KAET,OAAO,2BACFJ,GADL,IAEEV,KAAMmG,IAEV,KAAKtI,IAAY0B,kBACf,OAAO,2BACFmB,GADL,IAEEsF,WAAW,IAEf,KAAKnI,IAAY2B,gBACf,OAAO,2BACFkB,GADL,IAEEsF,WAAW,IAEf,KAAKnI,IAAY4B,kBACf,OAAO,2BACFiB,GADL,IAEEV,KAAMkG,EAAOtH,QAAQoB,OAEzB,QACE,OAAOU,IE9BXO,YDUa,WAAgC,IAA/BP,EAA8B,uDAAtBqF,GAAWG,EAAW,uCAC5C,OAAOA,EAAOtI,MACZ,KAAKC,IAAYK,YACf,OAAO,2BACFwC,GADL,IAEEsF,WAAW,IAEf,KAAKnI,IAAYc,cACf,IAAMF,EAAWyH,EAAOtH,QAAQH,SAChC,OAAO,uCACFiC,GACAjC,GAFL,IAGE6G,SAAS,EACTU,WAAW,IAEf,KAAKnI,IAAYC,aACf,MAAO,CACL+B,GAAI,GACJqB,YAAa,GACb9B,OAAQ,GACRmG,KAAM,GACND,SAAS,EACTU,WAAW,GAEf,KAAKnI,IAAYwB,cACf,OAAO,2BACFqB,GADL,IAEEtB,OAAQ8G,EAAOtH,QAAQM,SAE3B,QACE,OAAOwB,ME3CE0F,eAAYC,GACzBC,YAAgBC,M,OCOlBZ,iBACE,kBAAC,IAAD,CAAUa,MAAOA,IACf,uBAAgBC,OAAQC,KACtB,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CACEhB,KAAK,SACLC,OAAQ,SAACgB,GAGP,OAAO,kBAAC,EAAQA,MAGnB1B,EAAWpB,KAAI,SAACC,GACf,OACE,kBAAC,IAAD,CACEhI,IAAKgI,EAAM/B,SACXqD,MAAOtB,EAAMsB,MACbM,KAAM5B,EAAM/B,SACZmD,UAAWpB,EAAMoB,eAIvB,kBAAC,IAAD,CAAUW,GAAG,SAASC,KAAK,IAAIV,OAAK,IACpC,kBAAC,IAAD,CAAUS,GAAG,aAKrBe,SAASC,eAAe,U,4ECpCpBC,EAAY,CAAC,iBAEnBC,IAAMC,SAASC,QAAU,IACzBF,IAAMC,SAASE,iBAAkB,EACjCH,IAAMC,SAASG,QAAQC,OAAO,gBAAkB,iCAGhD,IAAMjJ,EAAO4I,IAAMM,OAAO,CACxBC,QAA+D,KAKjEnJ,EAAKoJ,aAAaC,QAAQC,KAAI,SAAAC,GAO5B,OANKZ,EAAUnE,SAAS+E,EAAOC,OAC7BD,EAAOE,KAAP,2BACKF,EAAOE,MADZ,IAEEpJ,UAAWxC,OAAOC,aAAaM,QAAQ,cAAgB,eAGpDmL,KAGTvJ,EAAKoJ,aAAaM,SAASJ,KAAI,SAAAK,GAC7B,GAAuB,MAAnBA,EAAKF,KAAKG,KACZ,OAAOD,EAAKF,KAAKA,KAGjB,IAAQI,MAAMF,EAAKF,KAAKK,WAIb9J,Q","file":"static/js/main.6888f038.chunk.js","sourcesContent":["/* eslint-disable */\r\n// 封装操作localstorage本地存储的方法\r\nconst $localStorage = {\r\n  set(key, value) {\r\n    // 存储\r\n    window.localStorage.setItem(key, JSON.stringify(value));\r\n  },\r\n\r\n  get(key) {\r\n    // 取出数据\r\n    return JSON.parse(window.localStorage.getItem(key));\r\n  },\r\n\r\n  remove(key) {\r\n    // 删除数据\r\n    window.localStorage.removeItem(key);\r\n  },\r\n};\r\n\r\n// 封装操作sessionStorage本地存储的方法\r\nconst $sessionStorage = {\r\n  set(key, value) {\r\n    //存储\r\n    window.sessionStorage.setItem(key, JSON.stringify(value));\r\n  },\r\n\r\n  get(key) {\r\n    // //取出数据\r\n    return JSON.parse(window.sessionStorage.getItem(key));\r\n  },\r\n\r\n  remove(key) {\r\n    // 删除数据\r\n    window.sessionStorage.removeItem(key);\r\n  },\r\n};\r\n\r\n// 截流函数 默认500ms\r\nconst throttle = (fn, interval) => {\r\n  const _self = fn;\r\n  let timer;\r\n  let firstTime = true;\r\n  return function () {\r\n    const args = arguments;\r\n    const __me = this;\r\n    if (firstTime) {\r\n      _self.apply(__me, args);\r\n      return (firstTime = false);\r\n    }\r\n    if (timer) {\r\n      return false;\r\n    }\r\n    timer = setTimeout(function () {\r\n      clearTimeout(timer);\r\n      timer = null;\r\n      _self.apply(__me, args);\r\n    }, interval || 500);\r\n  };\r\n};\r\n\r\n// 函数防抖（debounce） https://www.cnblogs.com/cc-freiheit/p/10827372.html\r\nconst debounce = (func, interval) => {\r\n  let timer;\r\n  return function () {\r\n    let args = arguments; // arguments中存着e\r\n    if (timer) clearTimeout(timer);\r\n    timer = setTimeout(() => {\r\n      func.apply(this, args);\r\n    }, interval || 500);\r\n  };\r\n};\r\n\r\n// 暴露给外部访问\r\nexport { $localStorage, $sessionStorage, throttle, debounce };\r\n","import actionTypes from './actionType'\r\nimport { loginApi } from '../../api/login'\r\nimport { $localStorage, $sessionStorage } from '../../utils'\r\n\r\nconst loginStart = () => {\r\n  return {\r\n    type: actionTypes.LOGIN_START\r\n  }\r\n}\r\nconst loginSuccess = (userInfo) => {\r\n  return {\r\n    type: actionTypes.LOGIN_SUCCESS,\r\n    payload: {\r\n      userInfo\r\n    }\r\n  }\r\n}\r\n\r\nconst loginFailed = () => {\r\n  return {\r\n    type: actionTypes.LOGIN_FAILED\r\n  }\r\n}\r\n\r\n// 登录\r\nexport const loginFn = params => dispatch => {\r\n  dispatch(loginStart())\r\n  loginApi(params).then(res => {\r\n    const {\r\n      authToken,\r\n      ...userInfo\r\n    } = res // 将authToken从res中抽离出，userInfo中就无authToken\r\n    if (params.remember === true) {\r\n      $localStorage.set('authToken', authToken)\r\n      $localStorage.set('userInfo', userInfo)\r\n      $sessionStorage.remove('authToken')\r\n      $sessionStorage.remove('userInfo')\r\n    } else {\r\n      $sessionStorage.set('authToken', authToken)\r\n      $sessionStorage.set('userInfo', userInfo)\r\n      $localStorage.remove('authToken')\r\n      $localStorage.remove('userInfo')\r\n    }\r\n    dispatch(loginSuccess(res))\r\n  }).catch( err => {\r\n    dispatch(loginFailed())\r\n    throw err\r\n  })\r\n}\r\n\r\n// 退出登录\r\nexport const loginOut = () => dispatch => {\r\n  $localStorage.remove('authToken')\r\n  $localStorage.remove('userInfo')\r\n  $sessionStorage.remove('authToken')\r\n  $sessionStorage.remove('userInfo')\r\n\r\n  // 实际项目中，还要向服务端发送退出登录请求\r\n  dispatch(loginFailed())\r\n}\r\n\r\n// 改变 avatar 头像\r\nexport const changeAvatar = (imgUrl) => dispatch => {\r\n  let Obj = $localStorage.get('userInfo') || $sessionStorage.get('userInfo')\r\n  let userInfo = {\r\n    ...Obj,\r\n    avatar: imgUrl\r\n  }\r\n  if ($localStorage.get('userInfo')) {\r\n    $localStorage.set('userInfo', userInfo)\r\n  } else if ($sessionStorage.get('userInfo')) {\r\n    $sessionStorage.set('userInfo', userInfo)\r\n  }\r\n  dispatch({\r\n    type: actionTypes.CHANGE_AVATAR,\r\n    payload: {\r\n      imgUrl\r\n    }\r\n  })\r\n}","import ajax from '../service'\r\n\r\nexport const loginApi = (params) => {\r\n  return ajax.post('/api/v1/login', params)\r\n}","export default {\r\n  NOTICE_READ: 'NOTICE_READ', // 标记消息已读\r\n  START_NOTICE_POST: 'START_NOTICE_POST', // 开始获取消息列表\r\n  END_NOTICE_POST: 'END_NOTICE_POST', // 结束获取消息列表\r\n  FETCH_NOTICE_LIST: 'FETCH_NOTICE_LIST', // 获取消息列表\r\n\r\n  LOGIN_START: 'LOGIN_START', // 登陆开始\r\n  LOGIN_SUCCESS: 'LOGIN_SUCCESS', // 登陆成功\r\n  LOGIN_FAILED: 'LOGIN_FAILED', // 登陆失败\r\n\r\n  CHANGE_AVATAR: 'CHANGE_AVATAR', // 改变avatar\r\n}","import actionTypes from './actionType'\r\nimport { fetchNoticeListApi } from '../../api/notice'\r\n\r\nconst startNotice = () => {\r\n  return {\r\n    type: actionTypes.START_NOTICE_POST\r\n  }\r\n}\r\nconst endNotice = () => {\r\n  return {\r\n    type: actionTypes.END_NOTICE_POST\r\n  }\r\n}\r\n\r\n// 标记已读\r\nexport const noticeRead = (id, readType = null) => dispatch => {\r\n  dispatch(startNotice())\r\n  // 模拟服务端异步请求\r\n  setTimeout(() => {\r\n    dispatch({\r\n      type: actionTypes.NOTICE_READ,\r\n      payload: {\r\n        id,\r\n        readType \r\n      }\r\n    })\r\n    dispatch(endNotice())\r\n  }, 1200)\r\n}\r\n\r\n// 获取notice消息列表\r\nexport const fetchNoticeList = () => dispatch => {\r\n  dispatch(startNotice())\r\n  fetchNoticeListApi().then(res => {\r\n    dispatch({\r\n      type: actionTypes.FETCH_NOTICE_LIST,\r\n      payload: {\r\n        list: res.list\r\n      }\r\n    })\r\n  })\r\n  dispatch(endNotice())\r\n}","import ajax from '../service'\r\n\r\nexport const fetchNoticeListApi = () => {\r\n  return ajax.post('/api/v1/noticeList')\r\n}","module.exports = __webpack_public_path__ + \"static/media/logo.75f291c0.png\";","import React from 'react'\r\n\r\nexport default function Loading() {\r\n  return (\r\n    <div>\r\n        <h1>Loading</h1>\r\n    </div>\r\n  )\r\n}\r\n","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { withRouter } from 'react-router-dom'\r\nimport { fetchNoticeList } from '../../store/actions/noticeAction'\r\nimport { loginOut } from '../../store/actions/userAction'\r\nimport { adminRouter }  from '../../routes'\r\n\r\nimport logoImg from './logo.png'\r\nimport './frame.less'\r\n\r\nimport { Layout, Menu, Icon, Dropdown, Badge, Avatar } from 'antd'\r\nconst { Header, Content, Sider } = Layout\r\nconst { SubMenu } = Menu\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    noticeCount: state.noticeReducer.list.filter(item => item.hasRead === false).length,\r\n    avatar: state.userReducer.avatar,\r\n    displayName: state.userReducer.displayName\r\n  }\r\n}\r\n\r\n@connect(mapStateToProps, { fetchNoticeList, loginOut })\r\n@withRouter\r\nclass Frame extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n    }\r\n  }\r\n\r\n\r\n  turnToPage = ({ key }) => {\r\n    if (key === '/login') return this.props.loginOut()\r\n    this.props.history.push(key)\r\n  }\r\n\r\n    // 这样写是静态的， Badge不会改变状态，写成组件（这里是函数无状态组件），redux状态改变，组件也会随之改变\r\n    // menu = (\r\n    //   <Menu onClick={this.turnToPage}>\r\n    //     <Menu.Item key='/admin/notice'>\r\n    //       <Badge dot>通知消息</Badge>\r\n    //     </Menu.Item>\r\n    //     <Menu.Item key='/admin/settings'>\r\n    //       个人设置\r\n    //     </Menu.Item>\r\n    //     <Menu.Item key='/login'>\r\n    //       退出登录\r\n    //     </Menu.Item>\r\n    //   </Menu>\r\n    // )\r\n  \r\n  renderMenu = (noticeCount) =>  (\r\n    <Menu onClick={this.turnToPage}>\r\n      <Menu.Item key='/admin/notice'>\r\n        <Badge dot={Boolean(noticeCount)}>通知消息</Badge>\r\n      </Menu.Item>\r\n      <Menu.Item key='/admin/profile'>\r\n        个人设置\r\n      </Menu.Item>\r\n      <Menu.Item key='/login'>\r\n        退出登录\r\n      </Menu.Item>\r\n    </Menu>\r\n  )\r\n\r\n  componentDidMount() {\r\n    this.props.fetchNoticeList()\r\n  }\r\n\r\n  render() {\r\n    const { avatar, displayName } = this.props\r\n    const pathArr = this.props.location.pathname.split('/')\r\n    let activePathArr = pathArr.slice(0, 3) // 3的原因是：进入详情页时，列表页menu仍选中状态\r\n    let openPathArr = pathArr.slice(0, 4) || []\r\n    let defaultProps = {}\r\n    if (openPathArr.length > 3) {  // 当path超过三层时，即可能进入subMenu二级菜单或着详情页的情况下\r\n      const openKeys = openPathArr.join('/')\r\n      // 如果是isNav显示在sider上，且有子路由，当前path包含父级路由的pathname\r\n      const flag = adminRouter.some(item => item.children && item.isNav && openKeys.includes(item.pathname))\r\n      if (flag) { // 此时可确定一定是进入了二级菜单\r\n        defaultProps = { openKeys }\r\n        activePathArr = pathArr.slice(0, 4) // 此时长度要设置4，3短了\r\n      } \r\n    }\r\n\r\n    return (\r\n      <Layout style={{minHeight:'100%'}}>\r\n        <Header className=\"header dj-header\" style={{backgroundColor:'#fff'}}>\r\n          <div className=\"dj-logo\">\r\n            <img src={logoImg} alt=\"loading...\"/>\r\n          </div>\r\n          <Dropdown overlay={this.renderMenu(this.props.noticeCount)}>\r\n            <div style={{display:'flex',alignItems:'center'}}>\r\n              <Badge count={this.props.noticeCount}>\r\n                <Avatar src={avatar} />\r\n                <span>欢迎你！{displayName}</span>\r\n                <Icon type=\"down\" />\r\n              </Badge>\r\n            </div>\r\n          </Dropdown>\r\n        </Header>\r\n        <Layout className='main-contaniner'>\r\n          <Sider width={200} className='main-sidder'>\r\n            <Menu\r\n              mode=\"inline\"\r\n              selectedKeys={[activePathArr.join('/')]}\r\n              style={{ height: '100%', borderRight: 0 }}\r\n              {...defaultProps}\r\n            >\r\n            {\r\n              this.props.menus.map(route => {\r\n                if (!route.children) {\r\n                  return (\r\n                    <Menu.Item key={route.pathname} onClick={({key}) => this.props.history.push(key)}>\r\n                      <Icon type={route.iconName} /> {route.title}\r\n                    </Menu.Item>\r\n                  )\r\n                } else {\r\n                  return (\r\n                    <SubMenu key={route.pathname} title={\r\n                      <span><Icon type={route.iconName} /> {route.title}</span>\r\n                    }>\r\n                    {\r\n                      route.children.map(subRoute => { \r\n                        return  <Menu.Item key={subRoute.pathname} onClick={({key}) => this.props.history.push(key)}>{subRoute.title}</Menu.Item>\r\n                      })\r\n                    }\r\n                    </SubMenu>\r\n                  )\r\n                }\r\n              })\r\n            }\r\n            </Menu>\r\n          </Sider>\r\n          <Layout style={{ padding: '16px' }} className='main-content'>\r\n            <Content\r\n              style={{\r\n                margin: 0\r\n              }}\r\n            >\r\n              {this.props.children}\r\n            </Content>\r\n          </Layout>\r\n        </Layout>\r\n      </Layout>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Frame","import Loadable from 'react-loadable';\r\n// import Loadable from './selfLoadable' // 简易react-loadable原理\r\nimport { Loading } from '../components';\r\n\r\nconst Login = Loadable({\r\n  loader: () => import('./Login'),\r\n  loading: Loading,\r\n});\r\nconst Dashboard = Loadable({\r\n  loader: () => import('./Dashboard'),\r\n  loading: Loading,\r\n});\r\nconst ArticleList = Loadable({\r\n  loader: () => import('./Article'),\r\n  loading: Loading,\r\n});\r\nconst ArticleEdit = Loadable({\r\n  loader: () => import('./Article/ArticleEdit'),\r\n  loading: Loading,\r\n});\r\nconst Settings = Loadable({\r\n  loader: () => import('./Settings'),\r\n  loading: Loading,\r\n});\r\nconst NotFound = Loadable({\r\n  loader: () => import('./NotFound'),\r\n  loading: Loading,\r\n});\r\nconst Notice = Loadable({\r\n  loader: () => import('./Notice'),\r\n  loading: Loading,\r\n});\r\nconst NoAuth = Loadable({\r\n  loader: () => import('./NoAuth'),\r\n  loading: Loading,\r\n});\r\nconst Profile = Loadable({\r\n  loader: () => import('./Profile'),\r\n  loading: Loading,\r\n});\r\nconst TestIndex = Loadable({\r\n  loader: () => import('./Test'),\r\n  loading: Loading,\r\n});\r\n\r\nconst CssIndex = Loadable({\r\n  loader: () => import('./Test/cssIndex/index.jsx'),\r\n  loading: Loading,\r\n});\r\n\r\nconst TimeLine = Loadable({\r\n  loader: () => import('./Test/TimeLine/index.jsx'),\r\n  loading: Loading,\r\n});\r\n\r\nconst HocComponent = Loadable({\r\n  loader: () => import('./Test/hoc/index.jsx'),\r\n  loading: Loading,\r\n});\r\n\r\nconst Parabola = Loadable({\r\n  loader: () => import('./Test/Parabola/index.jsx'),\r\n  loading: Loading,\r\n});\r\n\r\nconst TreeDemo = Loadable({\r\n  loader: () => import('./Test/Tree/index.jsx'),\r\n  loading: Loading,\r\n});\r\n\r\nconst EchartDemo = Loadable({\r\n  loader: () => import('./Test/echart/index.jsx'),\r\n  loading: Loading,\r\n});\r\n\r\nexport {\r\n  Login,\r\n  Dashboard,\r\n  ArticleList,\r\n  ArticleEdit,\r\n  Settings,\r\n  NotFound,\r\n  Notice,\r\n  NoAuth,\r\n  Profile,\r\n  TestIndex,\r\n  CssIndex,\r\n  TimeLine,\r\n  Parabola,\r\n  HocComponent,\r\n  TreeDemo,\r\n  EchartDemo,\r\n};\r\n\r\n// export { default as Login } from './Login'\r\n// export { default as Dashboard } from './Dashboard'\r\n// export { default as ArticleList } from './Article'\r\n// export { default as ArticleEdit } from './Article/ArticleEdit'\r\n// export { default as Settings } from './Settings'\r\n// export { default as NotFound } from './NotFound'\r\n","import {\r\n  Dashboard,\r\n  Login,\r\n  NotFound,\r\n  Settings,\r\n  ArticleList,\r\n  ArticleEdit,\r\n  Notice,\r\n  NoAuth,\r\n  Profile,\r\n  TestIndex,\r\n  CssIndex,\r\n  TimeLine,\r\n  HocComponent,\r\n  Parabola,\r\n  TreeDemo,\r\n  EchartDemo,\r\n} from '../views';\r\n\r\nexport const mainRouter = [\r\n  {\r\n    // 和app同级\r\n    pathname: '/login',\r\n    component: Login,\r\n  },\r\n  {\r\n    pathname: '/404',\r\n    component: NotFound,\r\n  },\r\n];\r\n\r\nexport const adminRouter = [\r\n  {\r\n    pathname: '/admin/dashboard',\r\n    component: Dashboard,\r\n    title: '仪表盘',\r\n    isNav: true,\r\n    iconName: 'dashboard',\r\n    roles: ['001', '002', '003'],\r\n  },\r\n  {\r\n    pathname: '/admin/article',\r\n    component: ArticleList,\r\n    exact: true,\r\n    title: '文章管理',\r\n    isNav: true,\r\n    iconName: 'unordered-list',\r\n    roles: ['001', '002', '003'],\r\n  },\r\n  {\r\n    pathname: '/admin/article/edit/:id',\r\n    component: ArticleEdit,\r\n    exact: true,\r\n    title: '文章编辑',\r\n    roles: ['001', '002', '003'],\r\n  },\r\n  {\r\n    pathname: '/admin/notice',\r\n    component: Notice,\r\n    title: '消息中心',\r\n    roles: ['001', '002', '003'],\r\n  },\r\n  {\r\n    pathname: '/admin/settings',\r\n    component: Settings,\r\n    title: '设置',\r\n    isNav: true,\r\n    iconName: 'setting',\r\n    roles: ['001'],\r\n  },\r\n  {\r\n    pathname: '/admin/test',\r\n    title: '实验',\r\n    isNav: true,\r\n    iconName: 'setting',\r\n    roles: ['001', '002', '003'],\r\n    children: [\r\n      {\r\n        pathname: '/admin/test/index',\r\n        title: '幸运抽奖',\r\n        isNav: true,\r\n        iconName: 'setting',\r\n        roles: ['001', '002', '003'],\r\n        component: TestIndex,\r\n      },\r\n      {\r\n        pathname: '/admin/test/cssindex',\r\n        title: 'css实验',\r\n        isNav: true,\r\n        iconName: 'setting',\r\n        roles: ['001', '002', '003'],\r\n        component: CssIndex,\r\n      },\r\n      {\r\n        pathname: '/admin/test/timeLine',\r\n        title: '时间戳',\r\n        isNav: true,\r\n        iconName: 'setting',\r\n        roles: ['001', '002', '003'],\r\n        component: TimeLine,\r\n      },\r\n      {\r\n        pathname: '/admin/test/hoc',\r\n        title: '高阶组件',\r\n        isNav: true,\r\n        iconName: 'setting',\r\n        roles: ['001', '002', '003'],\r\n        component: HocComponent,\r\n      },\r\n      {\r\n        pathname: '/admin/test/parabola',\r\n        title: '抛物线',\r\n        isNav: true,\r\n        iconName: 'setting',\r\n        roles: ['001', '002', '003'],\r\n        component: Parabola,\r\n      },\r\n      {\r\n        pathname: '/admin/test/tree',\r\n        title: 'tree组件',\r\n        isNav: true,\r\n        iconName: 'setting',\r\n        roles: ['001', '002', '003'],\r\n        component: TreeDemo,\r\n      },\r\n      {\r\n        pathname: '/admin/test/echart',\r\n        title: 'echart',\r\n        isNav: true,\r\n        iconName: 'setting',\r\n        roles: ['001', '002', '003'],\r\n        component: EchartDemo,\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    pathname: '/admin/noauth',\r\n    component: NoAuth,\r\n    roles: ['001', '002', '003'],\r\n  },\r\n  {\r\n    pathname: '/admin/profile',\r\n    component: Profile,\r\n    roles: ['001', '002', '003'],\r\n  },\r\n];\r\n","/* eslint-disable */\r\nimport React, { Component } from 'react';\r\nimport { Route, Switch, Redirect } from 'react-router-dom';\r\nimport { adminRouter } from './routes';\r\nimport { Frame } from './components';\r\nimport { connect } from 'react-redux';\r\nimport './assets/css/reset.scss';\r\n\r\nconst menus = adminRouter.filter((route) => route.isNav);\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    isLogin: state.userReducer.isLogin,\r\n    role: state.userReducer.role,\r\n  };\r\n};\r\n\r\n@connect(mapStateToProps)\r\nclass App extends Component {\r\n  renderRoute = (menuList, role) => {\r\n    return menuList.map((route) => {\r\n      if (route.children) {\r\n        return this.renderRoute(route.children, role);\r\n      } else {\r\n        return (\r\n          <Route\r\n            key={route.pathname}\r\n            path={route.pathname}\r\n            exact={route.exact}\r\n            render={(routerProps) => {\r\n              // roles权限判断\r\n              const hasPermission = route.roles.includes(role);\r\n              return hasPermission ? (\r\n                <route.component {...routerProps} />\r\n              ) : (\r\n                <Redirect to=\"/admin/noauth\" />\r\n              );\r\n            }}\r\n          />\r\n        );\r\n      }\r\n    });\r\n  };\r\n\r\n  render() {\r\n    // eslint-disable-next-line react/prop-types\r\n    const { isLogin, role } = this.props;\r\n    return isLogin ? (\r\n      <Frame menus={menus}>\r\n        <Switch>\r\n          {this.renderRoute(adminRouter, role)}\r\n          <Redirect to=\"/admin/dashboard\" from=\"/admin\" exact />\r\n          <Redirect to=\"/404\" />\r\n        </Switch>\r\n      </Frame>\r\n    ) : (\r\n      <Redirect to=\"/login\" />\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","import actionTypes from '../actions/actionType'\r\nconst initState = {\r\n  isLoading: false,\r\n  list: []\r\n}\r\n\r\nexport default (state = initState, action) => {\r\n  switch(action.type) {\r\n    case actionTypes.NOTICE_READ:\r\n      let newList = state.list.map(item => {\r\n        if (action.payload.readType==='allRead') { // 标记为全部已读\r\n          item.hasRead = true\r\n        } else if (item.id===action.payload.id) { // 标记为某个文章已读\r\n          item.hasRead = true\r\n        }\r\n        return item\r\n      })\r\n      return {\r\n        ...state,\r\n        list: newList\r\n      }\r\n    case actionTypes.START_NOTICE_POST:\r\n      return {\r\n        ...state,\r\n        isLoading: true\r\n      }\r\n    case actionTypes.END_NOTICE_POST:\r\n      return {\r\n        ...state,\r\n        isLoading: false\r\n      }\r\n    case actionTypes.FETCH_NOTICE_LIST:\r\n      return {\r\n        ...state,\r\n        list: action.payload.list\r\n      }\r\n    default:\r\n      return state\r\n  }\r\n}","import actionTypes from '../actions/actionType'\r\nimport { $localStorage, $sessionStorage } from '../../utils'\r\n\r\nconst isLogin = (\r\n  Boolean($localStorage.get('authToken')) || Boolean($sessionStorage.get('authToken'))\r\n)\r\n\r\nconst userInfo = (\r\n  $localStorage.get('userInfo') || $sessionStorage.get('userInfo')\r\n)\r\n\r\nconst initState = {\r\n  ...userInfo,\r\n  isLogin,\r\n  isLoading: false\r\n}\r\n\r\nexport default (state = initState, action) => {\r\n  switch(action.type) {\r\n    case actionTypes.LOGIN_START:\r\n      return {\r\n        ...state,\r\n        isLoading: true\r\n      }\r\n    case actionTypes.LOGIN_SUCCESS:\r\n      const userInfo = action.payload.userInfo\r\n      return {\r\n        ...state,\r\n        ...userInfo,\r\n        isLogin: true,\r\n        isLoading: false\r\n      }\r\n    case actionTypes.LOGIN_FAILED:\r\n      return {\r\n        id: '',\r\n        displayName: '',\r\n        avatar: '',\r\n        role: '',\r\n        isLogin: false,\r\n        isLoading: false\r\n      }\r\n    case actionTypes.CHANGE_AVATAR:\r\n      return {\r\n        ...state,\r\n        avatar: action.payload.imgUrl\r\n      }\r\n    default:\r\n      return state\r\n  }\r\n}","import { combineReducers } from 'redux'\r\n\r\nimport noticeReducer from './noticeReducer'\r\nimport userReducer from './userReducer'\r\n\r\nexport default combineReducers({\r\n  noticeReducer,\r\n  userReducer\r\n})","import { createStore, applyMiddleware } from 'redux'\r\nimport thunk from 'redux-thunk'\r\nimport rootReducer from './reducers'\r\n\r\nexport default createStore(rootReducer,\r\n  applyMiddleware(thunk))","import React from 'react';\r\nimport { render } from 'react-dom';\r\nimport zhCN from 'antd/es/locale/zh_CN';\r\nimport { ConfigProvider } from 'antd';\r\nimport { BrowserRouter as Router, Route, Switch, Redirect } from 'react-router-dom';\r\nimport { Provider } from 'react-redux';\r\nimport App from './App';\r\nimport { mainRouter } from './routes';\r\nimport store from './store';\r\n\r\nimport './index.less';\r\n\r\nrender(\r\n  <Provider store={store}>\r\n    <ConfigProvider locale={zhCN}>\r\n      <Router>\r\n        <Switch>\r\n          <Route\r\n            path=\"/admin\"\r\n            render={(rootProps) => {\r\n              // 权限：需要登录才能访问 /admin 本次在App组件里面做权限判断\r\n              // return store.getState().userReducer.isLogin ?  <App {...rootProps} /> : <Redirect to='/login' />\r\n              return <App {...rootProps} />;\r\n            }}\r\n          />\r\n          {mainRouter.map((route) => {\r\n            return (\r\n              <Route\r\n                key={route.pathname}\r\n                exact={route.exact}\r\n                path={route.pathname}\r\n                component={route.component}\r\n              />\r\n            );\r\n          })}\r\n          <Redirect to=\"/admin\" from=\"/\" exact />\r\n          <Redirect to=\"/404\" />\r\n        </Switch>\r\n      </Router>\r\n    </ConfigProvider>\r\n  </Provider>,\r\n  document.getElementById('root')\r\n);\r\n","import axios from 'axios'\r\nimport { message } from 'antd'\r\n\r\nconst isDev = process.env.NODE_ENV === 'development'\r\n\r\nconst whiteList = ['/api/v1/login']\r\n\r\naxios.defaults.timeout = 5000\r\naxios.defaults.withCredentials = true //允许跨越时携带cookie并不是加上就能跨域\r\naxios.defaults.headers.common['Content-Type'] = 'application/json;charset=utf-8';\r\n// axios.defaults.headers.common['X-Requested-With'] = 'XMLHttpRequest';\r\n\r\nconst ajax = axios.create({\r\n  baseURL: isDev ? 'http://rap2api.taobao.org/app/mock/242697' : ''\r\n})\r\n\r\n// console.log(document.cookie)\r\n\r\najax.interceptors.request.use(config => {\r\n  if (!whiteList.includes(config.url)) {\r\n    config.data = {\r\n      ...config.data,\r\n      authToken: window.localStorage.getItem('authToken') || 'textToken'\r\n    }\r\n  }\r\n  return config\r\n})\r\n\r\najax.interceptors.response.use(resp => {\r\n  if (resp.data.code === 200) {\r\n    return resp.data.data\r\n  } else {\r\n    // 全局处理错误\r\n    message.error(resp.data.errMsg)\r\n  }\r\n})\r\n\r\nexport default ajax"],"sourceRoot":""}